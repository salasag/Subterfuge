{"ast":null,"code":"/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Classes, getRef, Keys, Utils } from \"../../common\";\nimport { Icon } from \"../icon/icon\";\nimport { Spinner } from \"../spinner/spinner\";\n\nvar AbstractButton =\n/** @class */\nfunction (_super) {\n  __extends(AbstractButton, _super);\n\n  function AbstractButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isActive: false\n    };\n    _this.currentKeyDown = null; // we're casting as `any` to get around a somewhat opaque safeInvoke error\n    // that \"Type argument candidate 'KeyboardEvent<T>' is not a valid type\n    // argument because it is not a supertype of candidate\n    // 'KeyboardEvent<HTMLElement>'.\"\n\n    _this.handleKeyDown = function (e) {\n      var _a, _b; // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n\n      /* eslint-disable deprecation/deprecation */\n\n\n      if (Keys.isKeyboardClick(e.which)) {\n        e.preventDefault();\n\n        if (e.which !== _this.currentKeyDown) {\n          _this.setState({\n            isActive: true\n          });\n        }\n      }\n\n      _this.currentKeyDown = e.which;\n      (_b = (_a = _this.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    };\n\n    _this.handleKeyUp = function (e) {\n      var _a, _b; // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n\n      /* eslint-disable deprecation/deprecation */\n\n\n      if (Keys.isKeyboardClick(e.which)) {\n        _this.setState({\n          isActive: false\n        });\n\n        getRef(_this.buttonRef).click();\n      }\n\n      _this.currentKeyDown = null;\n      (_b = (_a = _this.props).onKeyUp) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    };\n\n    return _this;\n  } // A disabled element cannot be active, but there are cases where\n  // this situation can happen (NumericInput buttons), hence the need\n  // to check if disabled prop has been passed and change isActive\n  // accordingly\n\n\n  AbstractButton.getDerivedStateFromProps = function (props, state) {\n    if (state.isActive && props.disabled) {\n      return {\n        isActive: false\n      };\n    }\n\n    return null;\n  };\n\n  AbstractButton.prototype.getCommonButtonProps = function () {\n    var _a;\n\n    var _b = this.props,\n        alignText = _b.alignText,\n        fill = _b.fill,\n        large = _b.large,\n        loading = _b.loading,\n        outlined = _b.outlined,\n        minimal = _b.minimal,\n        small = _b.small,\n        tabIndex = _b.tabIndex;\n    var disabled = this.props.disabled || loading;\n    var className = classNames(Classes.BUTTON, (_a = {}, _a[Classes.ACTIVE] = this.state.isActive || this.props.active, _a[Classes.DISABLED] = disabled, _a[Classes.FILL] = fill, _a[Classes.LARGE] = large, _a[Classes.LOADING] = loading, _a[Classes.MINIMAL] = minimal, _a[Classes.OUTLINED] = outlined, _a[Classes.SMALL] = small, _a), Classes.alignmentClass(alignText), Classes.intentClass(this.props.intent), this.props.className);\n    return {\n      className: className,\n      disabled: disabled,\n      onClick: disabled ? undefined : this.props.onClick,\n      onKeyDown: this.handleKeyDown,\n      onKeyUp: this.handleKeyUp,\n      tabIndex: disabled ? -1 : tabIndex\n    };\n  };\n\n  AbstractButton.prototype.renderChildren = function () {\n    var _a = this.props,\n        children = _a.children,\n        icon = _a.icon,\n        loading = _a.loading,\n        rightIcon = _a.rightIcon,\n        text = _a.text;\n    return [loading && React.createElement(Spinner, {\n      key: \"loading\",\n      className: Classes.BUTTON_SPINNER,\n      size: Icon.SIZE_LARGE\n    }), React.createElement(Icon, {\n      key: \"leftIcon\",\n      icon: icon\n    }), (!Utils.isReactNodeEmpty(text) || !Utils.isReactNodeEmpty(children)) && React.createElement(\"span\", {\n      key: \"text\",\n      className: Classes.BUTTON_TEXT\n    }, text, children), React.createElement(Icon, {\n      key: \"rightIcon\",\n      icon: rightIcon\n    })];\n  };\n\n  return AbstractButton;\n}(AbstractPureComponent2);\n\nexport { AbstractButton };","map":{"version":3,"sources":["../../../../src/components/button/abstractButton.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __extends } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Classes, getRef, Keys, Utils, } from \"../../common\";\nimport { Icon } from \"../icon/icon\";\nimport { Spinner } from \"../spinner/spinner\";\nvar AbstractButton = /** @class */ (function (_super) {\n    __extends(AbstractButton, _super);\n    function AbstractButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            isActive: false,\n        };\n        _this.currentKeyDown = null;\n        // we're casting as `any` to get around a somewhat opaque safeInvoke error\n        // that \"Type argument candidate 'KeyboardEvent<T>' is not a valid type\n        // argument because it is not a supertype of candidate\n        // 'KeyboardEvent<HTMLElement>'.\"\n        _this.handleKeyDown = function (e) {\n            var _a, _b;\n            // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n            /* eslint-disable deprecation/deprecation */\n            if (Keys.isKeyboardClick(e.which)) {\n                e.preventDefault();\n                if (e.which !== _this.currentKeyDown) {\n                    _this.setState({ isActive: true });\n                }\n            }\n            _this.currentKeyDown = e.which;\n            (_b = (_a = _this.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        };\n        _this.handleKeyUp = function (e) {\n            var _a, _b;\n            // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n            /* eslint-disable deprecation/deprecation */\n            if (Keys.isKeyboardClick(e.which)) {\n                _this.setState({ isActive: false });\n                getRef(_this.buttonRef).click();\n            }\n            _this.currentKeyDown = null;\n            (_b = (_a = _this.props).onKeyUp) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        };\n        return _this;\n    }\n    // A disabled element cannot be active, but there are cases where\n    // this situation can happen (NumericInput buttons), hence the need\n    // to check if disabled prop has been passed and change isActive\n    // accordingly\n    AbstractButton.getDerivedStateFromProps = function (props, state) {\n        if (state.isActive && props.disabled) {\n            return {\n                isActive: false,\n            };\n        }\n        return null;\n    };\n    AbstractButton.prototype.getCommonButtonProps = function () {\n        var _a;\n        var _b = this.props, alignText = _b.alignText, fill = _b.fill, large = _b.large, loading = _b.loading, outlined = _b.outlined, minimal = _b.minimal, small = _b.small, tabIndex = _b.tabIndex;\n        var disabled = this.props.disabled || loading;\n        var className = classNames(Classes.BUTTON, (_a = {},\n            _a[Classes.ACTIVE] = this.state.isActive || this.props.active,\n            _a[Classes.DISABLED] = disabled,\n            _a[Classes.FILL] = fill,\n            _a[Classes.LARGE] = large,\n            _a[Classes.LOADING] = loading,\n            _a[Classes.MINIMAL] = minimal,\n            _a[Classes.OUTLINED] = outlined,\n            _a[Classes.SMALL] = small,\n            _a), Classes.alignmentClass(alignText), Classes.intentClass(this.props.intent), this.props.className);\n        return {\n            className: className,\n            disabled: disabled,\n            onClick: disabled ? undefined : this.props.onClick,\n            onKeyDown: this.handleKeyDown,\n            onKeyUp: this.handleKeyUp,\n            tabIndex: disabled ? -1 : tabIndex,\n        };\n    };\n    AbstractButton.prototype.renderChildren = function () {\n        var _a = this.props, children = _a.children, icon = _a.icon, loading = _a.loading, rightIcon = _a.rightIcon, text = _a.text;\n        return [\n            loading && React.createElement(Spinner, { key: \"loading\", className: Classes.BUTTON_SPINNER, size: Icon.SIZE_LARGE }),\n            React.createElement(Icon, { key: \"leftIcon\", icon: icon }),\n            (!Utils.isReactNodeEmpty(text) || !Utils.isReactNodeEmpty(children)) && (React.createElement(\"span\", { key: \"text\", className: Classes.BUTTON_TEXT },\n                text,\n                children)),\n            React.createElement(Icon, { key: \"rightIcon\", icon: rightIcon }),\n        ];\n    };\n    return AbstractButton;\n}(AbstractPureComponent2));\nexport { AbstractButton };\n//# sourceMappingURL=abstractButton.js.map"]},"metadata":{},"sourceType":"module"}